"use strict";var Zn=Object.defineProperty;var Xn=(e,t,n)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>(Xn(e,typeof t!="symbol"?t+"":t,n),n);const ce=require("siyuan");const $n=`<symbol id="icon-custom-block-menu" viewBox="0 0 1024 1024">
    <path
        d="M520 943.712a8 8 0 0 1-8-8v-416a8 8 0 0 1 8-8h416a8 8 0 0 1 8 8v416a8 8 0 0 1-8 8h-416z"
        fill="#80C33C"
    />
    <path
        d="M920 535.712v384h-384v-384h384m16-48h-416a32 32 0 0 0-32 32v416a32 32 0 0 0 32 32h416a32 32 0 0 0 32-32v-416a32 32 0 0 0-32-32z"
        fill="#3A7033"
    />
    <path
        d="M88 894.688a8 8 0 0 1-8-8v-416a8 8 0 0 1 8-8h416a8 8 0 0 1 8 8v416a8 8 0 0 1-8 8h-416z"
        fill="#E4001D"
    />
    <path
        d="M488 486.688v384h-384v-384h384m16-48h-416a32 32 0 0 0-32 32v416a32 32 0 0 0 32 32h416a32 32 0 0 0 32-32v-416a32 32 0 0 0-32-32z"
        fill="#8C031A"
    />
    <path
        d="M264.864 512.288a8 8 0 0 1-8-8v-416a8 8 0 0 1 8-8h416a8 8 0 0 1 8 8v416a8 8 0 0 1-8 8h-416z"
        fill="#2AB2EC"
    />
    <path
        d="M664.864 104.288v384h-384v-384h384m16-48h-416a32 32 0 0 0-32 32v416a32 32 0 0 0 32 32h416a32 32 0 0 0 32-32v-416a32 32 0 0 0-32-32z"
        fill="#0181B8"
    />
</symbol>
`,xn=`<symbol id="icon-custom-block-render-danmaku" viewBox="0 0 1024 1024">
    <path
        d="M1024 512c0 282.7264-229.1712 512-512 512-282.7776 0-512-229.2736-512-512C0 229.2224 229.2224 0 512 0c282.8288 0 512 229.2224 512 512"
        fill="#9966FF"
    />
    <path
        d="M256 256m51.2 0l409.6 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-409.6 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"
        fill="#FFFFFF"
    />
    <path
        d="M256 460.8m51.2 0l409.6 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-409.6 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"
        fill="#FFFFFF"
    />
    <path
        d="M256 665.6m51.2 0l204.8 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-204.8 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"
        fill="#FFFFFF"
    />
</symbol>
`,eo=`<symbol id="icon-custom-block-width-auto" viewBox="0 0 1024 1024">
    <path
        d="M113.777 819.198 113.777 204.8c0-50.267 40.75-91.022 91.02-91.022l614.376 0c50.29 0 91.045 40.755 91.045 91.022l0 614.398c0 50.27-40.755 91.02-91.045 91.02L204.797 910.218C154.527 910.218 113.777 869.468 113.777 819.198zM796.438 841.953c25.125 0 45.51-20.385 45.51-45.51L841.948 227.554c0-25.122-20.385-45.51-45.505-45.51L227.552 182.044c-25.125 0-45.535 20.387-45.535 45.51l0 568.889c0 25.125 20.39 45.51 45.535 45.51L796.438 841.953zM623.043 603.269l57.115-57.14L344.357 546.129l55.5 55.505c13.31 13.335 13.335 34.93 0 48.265-13.335 13.33-34.95 13.33-48.29 0l-105.765-105.77c-3.415-1.615-6.78-3.525-9.625-6.37-7.08-7.1-10.1-16.475-9.67-25.76-0.46-9.262 2.59-18.66 9.69-25.76 2.85-2.842 6.15-4.8 9.58-6.348l105.79-105.79c13.34-13.335 34.955-13.335 48.29 0 13.31 13.332 13.335 34.927 0 48.262l-55.5 55.502 335.802 0-57.115-57.117c-13.355-13.335-13.335-34.952 0-48.287s34.93-13.335 48.265 0l115.37 115.395c13.335 13.332 13.36 34.927 0 48.262l-115.37 115.395c-13.335 13.335-34.95 13.335-48.265 0C609.708 638.198 609.708 616.583 623.043 603.269z"
    />
</symbol>
`,to=`<symbol id="icon-custom-block-width-equal" viewBox="0 0 1024 1024">
    <path
        d="M367.8 321.3H188.2c-68.2 0-123.6 55.5-123.6 123.6L64.2 836c0 68.2 55.5 123.6 123.6 123.6h179.6c68.2 0 123.6-55.5 123.6-123.6l0.4-391.1c0.1-68.1-55.4-123.6-123.6-123.6z m39.5 123.6l-0.4 391.1c0 21.8-17.7 39.5-39.5 39.5H187.8c-21.8 0-39.5-17.7-39.5-39.5l0.4-391.1c0-21.8 17.7-39.5 39.5-39.5h179.6c21.8 0.1 39.5 17.8 39.5 39.5zM836 321.3H656.4c-68.2 0-123.6 55.5-123.6 123.6v229.3c0 68.2 55.5 123.6 123.6 123.6H836c68.2 0 123.6-55.5 123.6-123.6V444.9c0.1-68.1-55.4-123.6-123.6-123.6z m39.6 123.6v229.3c0 21.8-17.7 39.5-39.5 39.5H656.5c-21.8 0-39.5-17.7-39.5-39.5V444.9c0-21.8 17.7-39.5 39.5-39.5h179.6c21.8 0.1 39.5 17.8 39.5 39.5z"
    />
    <path
        d="M880.1 233.4v-94.7c0-22.1 17.9-40 40-40s40 17.9 40 40v94.7c0 22.1-17.9 40-40 40s-40-17.9-40-40zM533.5 233.4v-94.7c0-22.1 17.9-40 40-40s40 17.9 40 40v94.7c0 22.1-17.9 40-40 40s-40-17.9-40-40z"
    />
    <path
        d="M554.1 186c0-22.1 15.4-40 34.5-40h309.3c19 0 34.5 17.9 34.5 40s-15.4 40-34.5 40H588.6c-19 0-34.5-17.9-34.5-40z"
    />
    <path
        d="M410.9 233.4v-94.7c0-22.1 17.9-40 40-40s40 17.9 40 40v94.7c0 22.1-17.9 40-40 40s-40-17.9-40-40zM64.3 233.4v-94.7c0-22.1 17.9-40 40-40s40 17.9 40 40v94.7c0 22.1-17.9 40-40 40s-40-17.9-40-40z"
    />
    <path
        d="M84.9 186c0-22.1 15.4-40 34.5-40h309.3c19 0 34.5 17.9 34.5 40s-15.4 40-34.5 40H119.4c-19.1 0-34.5-17.9-34.5-40z"
    />
</symbol>
`;var no=Object.defineProperty,oo=(e,t,n)=>t in e?no(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ze=(e,t,n)=>(oo(e,typeof t!="symbol"?t+"":t,n),n);function ln(e,t){return function(){return e.apply(t,arguments)}}const{toString:ro}=Object.prototype,{getPrototypeOf:ut}=Object,He=(e=>t=>{const n=ro.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),x=e=>(e=e.toLowerCase(),t=>He(t)===e),Ve=e=>t=>typeof t===e,{isArray:ye}=Array,Ne=Ve("undefined");function io(e){return e!==null&&!Ne(e)&&e.constructor!==null&&!Ne(e.constructor)&&V(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cn=x("ArrayBuffer");function so(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cn(e.buffer),t}const ao=Ve("string"),V=Ve("function"),un=Ve("number"),Ge=e=>e!==null&&typeof e=="object",lo=e=>e===!0||e===!1,Me=e=>{if(He(e)!=="object")return!1;const t=ut(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},co=x("Date"),uo=x("File"),fo=x("Blob"),ho=x("FileList"),po=e=>Ge(e)&&V(e.pipe),mo=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||V(e.append)&&((t=He(e))==="formdata"||t==="object"&&V(e.toString)&&e.toString()==="[object FormData]"))},bo=x("URLSearchParams"),_o=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Oe(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,r;if(typeof e!="object"&&(e=[e]),ye(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let l;for(o=0;o<s;o++)l=i[o],t.call(null,e[l],l,e)}}function fn(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,r;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const dn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hn=e=>!Ne(e)&&e!==dn;function ot(){const{caseless:e}=hn(this)&&this||{},t={},n=(o,r)=>{const i=e&&fn(t,r)||r;Me(t[i])&&Me(o)?t[i]=ot(t[i],o):Me(o)?t[i]=ot({},o):ye(o)?t[i]=o.slice():t[i]=o};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&Oe(arguments[o],n);return t}const go=(e,t,n,{allOwnKeys:o}={})=>(Oe(t,(r,i)=>{n&&V(r)?e[i]=ln(r,n):e[i]=r},{allOwnKeys:o}),e),ko=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yo=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},wo=(e,t,n,o)=>{let r,i,s;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)s=r[i],(!o||o(s,e,t))&&!l[s]&&(t[s]=e[s],l[s]=!0);e=n!==!1&&ut(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},So=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},No=e=>{if(!e)return null;if(ye(e))return e;let t=e.length;if(!un(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Eo=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ut(Uint8Array)),vo=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const r=o.value;t.call(e,r[0],r[1])}},To=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},Oo=x("HTMLFormElement"),Bo=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,o){return n.toUpperCase()+o}),gt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ao=x("RegExp"),pn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Oe(n,(r,i)=>{t(r,i,e)!==!1&&(o[i]=r)}),Object.defineProperties(e,o)},Co=e=>{pn(e,(t,n)=>{if(V(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(V(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Do=(e,t)=>{const n={},o=r=>{r.forEach(i=>{n[i]=!0})};return ye(e)?o(e):o(String(e).split(t)),n},Po=()=>{},Ro=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ze="abcdefghijklmnopqrstuvwxyz",kt="0123456789",mn={DIGIT:kt,ALPHA:Ze,ALPHA_DIGIT:Ze+Ze.toUpperCase()+kt},Mo=(e=16,t=mn.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function Fo(e){return!!(e&&V(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Lo=e=>{const t=new Array(10),n=(o,r)=>{if(Ge(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[r]=o;const i=ye(o)?[]:{};return Oe(o,(s,l)=>{const a=n(s,r+1);!Ne(a)&&(i[l]=a)}),t[r]=void 0,i}}return o};return n(e,0)},qo=x("AsyncFunction"),jo=e=>e&&(Ge(e)||V(e))&&V(e.then)&&V(e.catch),p={isArray:ye,isArrayBuffer:cn,isBuffer:io,isFormData:mo,isArrayBufferView:so,isString:ao,isNumber:un,isBoolean:lo,isObject:Ge,isPlainObject:Me,isUndefined:Ne,isDate:co,isFile:uo,isBlob:fo,isRegExp:Ao,isFunction:V,isStream:po,isURLSearchParams:bo,isTypedArray:Eo,isFileList:ho,forEach:Oe,merge:ot,extend:go,trim:_o,stripBOM:ko,inherits:yo,toFlatObject:wo,kindOf:He,kindOfTest:x,endsWith:So,toArray:No,forEachEntry:vo,matchAll:To,isHTMLForm:Oo,hasOwnProperty:gt,hasOwnProp:gt,reduceDescriptors:pn,freezeMethods:Co,toObjectSet:Do,toCamelCase:Bo,noop:Po,toFiniteNumber:Ro,findKey:fn,global:dn,isContextDefined:hn,ALPHABET:mn,generateString:Mo,isSpecCompliantForm:Fo,toJSONObject:Lo,isAsyncFn:qo,isThenable:jo};function B(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}p.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const bn=B.prototype,_n={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_n[e]={value:e}});Object.defineProperties(B,_n);Object.defineProperty(bn,"isAxiosError",{value:!0});B.from=(e,t,n,o,r,i)=>{const s=Object.create(bn);return p.toFlatObject(e,s,function(l){return l!==Error.prototype},l=>l!=="isAxiosError"),B.call(s,e.message,t,n,o,r),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const Uo=null;function rt(e){return p.isPlainObject(e)||p.isArray(e)}function gn(e){return p.endsWith(e,"[]")?e.slice(0,-2):e}function yt(e,t,n){return e?e.concat(t).map(function(o,r){return o=gn(o),!n&&r?"["+o+"]":o}).join(n?".":""):t}function Io(e){return p.isArray(e)&&!e.some(rt)}const zo=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function We(e,t,n){if(!p.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=p.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,h){return!p.isUndefined(h[f])});const o=n.metaTokens,r=n.visitor||c,i=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(t);if(!p.isFunction(r))throw new TypeError("visitor must be a function");function a(f){if(f===null)return"";if(p.isDate(f))return f.toISOString();if(!l&&p.isBlob(f))throw new B("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(f)||p.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,h,d){let u=f;if(f&&!d&&typeof f=="object"){if(p.endsWith(h,"{}"))h=o?h:h.slice(0,-2),f=JSON.stringify(f);else if(p.isArray(f)&&Io(f)||(p.isFileList(f)||p.endsWith(h,"[]"))&&(u=p.toArray(f)))return h=gn(h),u.forEach(function(w,le){!(p.isUndefined(w)||w===null)&&t.append(s===!0?yt([h],le,i):s===null?h:h+"[]",a(w))}),!1}return rt(f)?!0:(t.append(yt(d,h,i),a(f)),!1)}const m=[],g=Object.assign(zo,{defaultVisitor:c,convertValue:a,isVisitable:rt});function _(f,h){if(!p.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(f),p.forEach(f,function(d,u){(!(p.isUndefined(d)||d===null)&&r.call(t,d,p.isString(u)?u.trim():u,h,g))===!0&&_(d,h?h.concat(u):[u])}),m.pop()}}if(!p.isObject(e))throw new TypeError("data must be an object");return _(e),t}function wt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ft(e,t){this._pairs=[],e&&We(e,this,t)}const kn=ft.prototype;kn.append=function(e,t){this._pairs.push([e,t])};kn.toString=function(e){const t=e?function(n){return e.call(this,n,wt)}:wt;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function Ho(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yn(e,t,n){if(!t)return e;const o=n&&n.encode||Ho,r=n&&n.serialize;let i;if(r?i=r(t,n):i=p.isURLSearchParams(t)?t.toString():new ft(t,n).toString(o),i){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Vo{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){p.forEach(this.handlers,function(n){n!==null&&t(n)})}}const St=Vo,wn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Go=typeof URLSearchParams<"u"?URLSearchParams:ft,Wo=typeof FormData<"u"?FormData:null,Ko=typeof Blob<"u"?Blob:null,Jo=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Qo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),$={isBrowser:!0,classes:{URLSearchParams:Go,FormData:Wo,Blob:Ko},isStandardBrowserEnv:Jo,isStandardBrowserWebWorkerEnv:Qo,protocols:["http","https","file","blob","url","data"]};function Yo(e,t){return We(e,new $.classes.URLSearchParams,Object.assign({visitor:function(n,o,r,i){return $.isNode&&p.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Zo(e){return p.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Xo(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}function Sn(e){function t(n,o,r,i){let s=n[i++];const l=Number.isFinite(+s),a=i>=n.length;return s=!s&&p.isArray(r)?r.length:s,a?(p.hasOwnProp(r,s)?r[s]=[r[s],o]:r[s]=o,!l):((!r[s]||!p.isObject(r[s]))&&(r[s]=[]),t(n,o,r[s],i)&&p.isArray(r[s])&&(r[s]=Xo(r[s])),!l)}if(p.isFormData(e)&&p.isFunction(e.entries)){const n={};return p.forEachEntry(e,(o,r)=>{t(Zo(o),r,n,0)}),n}return null}const $o={"Content-Type":void 0};function xo(e,t,n){if(p.isString(e))try{return(t||JSON.parse)(e),p.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Ke={transitional:wn,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=p.isObject(e);if(r&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return o&&o?JSON.stringify(Sn(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Yo(e,this.formSerializer).toString();if((i=p.isFileList(e))||n.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return We(i?{"files[]":e}:e,s&&new s,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),xo(e)):e}],transformResponse:[function(e){const t=this.transitional||Ke.transitional,n=t&&t.forcedJSONParsing,o=this.responseType==="json";if(e&&p.isString(e)&&(n&&!this.responseType||o)){const r=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(i){if(r)throw i.name==="SyntaxError"?B.from(i,B.ERR_BAD_RESPONSE,this,null,this.response):i}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$.classes.FormData,Blob:$.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(e){Ke.headers[e]={}});p.forEach(["post","put","patch"],function(e){Ke.headers[e]=p.merge($o)});const dt=Ke,er=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tr=e=>{const t={};let n,o,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),o=i.substring(r+1).trim(),!(!n||t[n]&&er[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Nt=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function Fe(e){return e===!1||e==null?e:p.isArray(e)?e.map(Fe):String(e)}function nr(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const or=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xe(e,t,n,o,r){if(p.isFunction(o))return o.call(this,t,n);if(r&&(t=n),!!p.isString(t)){if(p.isString(o))return t.indexOf(o)!==-1;if(p.isRegExp(o))return o.test(t)}}function rr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function ir(e,t){const n=p.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(r,i,s){return this[o].call(this,t,r,i,s)},configurable:!0})})}let Je=class{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(s,l,a){const c=we(l);if(!c)throw new Error("header name must be a non-empty string");const m=p.findKey(o,c);(!m||o[m]===void 0||a===!0||a===void 0&&o[m]!==!1)&&(o[m||l]=Fe(s))}const i=(s,l)=>p.forEach(s,(a,c)=>r(a,c,l));return p.isPlainObject(e)||e instanceof this.constructor?i(e,t):p.isString(e)&&(e=e.trim())&&!or(e)?i(tr(e),t):e!=null&&r(t,e,n),this}get(e,t){if(e=we(e),e){const n=p.findKey(this,e);if(n){const o=this[n];if(!t)return o;if(t===!0)return nr(o);if(p.isFunction(t))return t.call(this,o,n);if(p.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e),e){const n=p.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Xe(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let o=!1;function r(i){if(i=we(i),i){const s=p.findKey(n,i);s&&(!t||Xe(n,n[s],s,t))&&(delete n[s],o=!0)}}return p.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];(!e||Xe(this,this[r],r,e,!0))&&(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return p.forEach(this,(o,r)=>{const i=p.findKey(n,r);if(i){t[i]=Fe(o),delete t[r];return}const s=e?rr(r):String(r).trim();s!==r&&delete t[r],t[s]=Fe(o),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return p.forEach(this,(n,o)=>{n!=null&&n!==!1&&(t[o]=e&&p.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(o=>n.set(o)),n}static accessor(e){const t=(this[Nt]=this[Nt]={accessors:{}}).accessors,n=this.prototype;function o(r){const i=we(r);t[i]||(ir(n,r),t[i]=!0)}return p.isArray(e)?e.forEach(o):o(e),this}};Je.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.freezeMethods(Je.prototype);p.freezeMethods(Je);const ee=Je;function $e(e,t){const n=this||dt,o=t||n,r=ee.from(o.headers);let i=o.data;return p.forEach(e,function(s){i=s.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Nn(e){return!!(e&&e.__CANCEL__)}function Be(e,t,n){B.call(this,e??"canceled",B.ERR_CANCELED,t,n),this.name="CanceledError"}p.inherits(Be,B,{__CANCEL__:!0});function sr(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new B("Request failed with status code "+n.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ar=$.isStandardBrowserEnv?function(){return{write:function(e,t,n,o,r,i){const s=[];s.push(e+"="+encodeURIComponent(t)),p.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),p.isString(o)&&s.push("path="+o),p.isString(r)&&s.push("domain="+r),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function lr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function cr(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function En(e,t){return e&&!lr(t)?cr(e,t):t}const ur=$.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(r){let i=r;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(r){const i=p.isString(r)?o(r):r;return i.protocol===n.protocol&&i.host===n.host}}():function(){return function(){return!0}}();function fr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function dr(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r=0,i=0,s;return t=t!==void 0?t:1e3,function(l){const a=Date.now(),c=o[i];s||(s=a),n[r]=l,o[r]=a;let m=i,g=0;for(;m!==r;)g+=n[m++],m=m%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),a-s<t)return;const _=c&&a-c;return _?Math.round(g*1e3/_):void 0}}function Et(e,t){let n=0;const o=dr(50,250);return r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,l=i-n,a=o(l),c=i<=s;n=i;const m={loaded:i,total:s,progress:s?i/s:void 0,bytes:l,rate:a||void 0,estimated:a&&s&&c?(s-i)/a:void 0,event:r};m[t?"download":"upload"]=!0,e(m)}}const hr=typeof XMLHttpRequest<"u",pr=hr&&function(e){return new Promise(function(t,n){let o=e.data;const r=ee.from(e.headers).normalize(),i=e.responseType;let s;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}p.isFormData(o)&&($.isStandardBrowserEnv||$.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const _=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(_+":"+f))}const c=En(e.baseURL,e.url);a.open(e.method.toUpperCase(),yn(c,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function m(){if(!a)return;const _=ee.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),f={data:!i||i==="text"||i==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:_,config:e,request:a};sr(function(h){t(h),l()},function(h){n(h),l()},f),a=null}if("onloadend"in a?a.onloadend=m:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(m)},a.onabort=function(){a&&(n(new B("Request aborted",B.ECONNABORTED,e,a)),a=null)},a.onerror=function(){n(new B("Network Error",B.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const f=e.transitional||wn;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),n(new B(_,f.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,e,a)),a=null},$.isStandardBrowserEnv){const _=(e.withCredentials||ur(c))&&e.xsrfCookieName&&ar.read(e.xsrfCookieName);_&&r.set(e.xsrfHeaderName,_)}o===void 0&&r.setContentType(null),"setRequestHeader"in a&&p.forEach(r.toJSON(),function(_,f){a.setRequestHeader(f,_)}),p.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),i&&i!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",Et(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Et(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=_=>{a&&(n(!_||_.type?new Be(null,e,a):_),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const g=fr(c);if(g&&$.protocols.indexOf(g)===-1){n(new B("Unsupported protocol "+g+":",B.ERR_BAD_REQUEST,e));return}a.send(o||null)})},Le={http:Uo,xhr:pr};p.forEach(Le,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mr={getAdapter:e=>{e=p.isArray(e)?e:[e];const{length:t}=e;let n,o;for(let r=0;r<t&&(n=e[r],!(o=p.isString(n)?Le[n.toLowerCase()]:n));r++);if(!o)throw o===!1?new B(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(p.hasOwnProp(Le,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!p.isFunction(o))throw new TypeError("adapter is not a function");return o},adapters:Le};function xe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Be(null,e)}function vt(e){return xe(e),e.headers=ee.from(e.headers),e.data=$e.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mr.getAdapter(e.adapter||dt.adapter)(e).then(function(t){return xe(e),t.data=$e.call(e,e.transformResponse,t),t.headers=ee.from(t.headers),t},function(t){return Nn(t)||(xe(e),t&&t.response&&(t.response.data=$e.call(e,e.transformResponse,t.response),t.response.headers=ee.from(t.response.headers))),Promise.reject(t)})}const Tt=e=>e instanceof ee?e.toJSON():e;function ge(e,t){t=t||{};const n={};function o(c,m,g){return p.isPlainObject(c)&&p.isPlainObject(m)?p.merge.call({caseless:g},c,m):p.isPlainObject(m)?p.merge({},m):p.isArray(m)?m.slice():m}function r(c,m,g){if(p.isUndefined(m)){if(!p.isUndefined(c))return o(void 0,c,g)}else return o(c,m,g)}function i(c,m){if(!p.isUndefined(m))return o(void 0,m)}function s(c,m){if(p.isUndefined(m)){if(!p.isUndefined(c))return o(void 0,c)}else return o(void 0,m)}function l(c,m,g){if(g in t)return o(c,m);if(g in e)return o(void 0,c)}const a={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(c,m)=>r(Tt(c),Tt(m),!0)};return p.forEach(Object.keys(Object.assign({},e,t)),function(c){const m=a[c]||r,g=m(e[c],t[c],c);p.isUndefined(g)&&m!==l||(n[c]=g)}),n}const vn="1.4.0",ht={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ht[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ot={};ht.transitional=function(e,t,n){function o(r,i){return"[Axios v"+vn+"] Transitional option '"+r+"'"+i+(n?". "+n:"")}return(r,i,s)=>{if(e===!1)throw new B(o(i," has been removed"+(t?" in "+t:"")),B.ERR_DEPRECATED);return t&&!Ot[i]&&(Ot[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,i,s):!0}};function br(e,t,n){if(typeof e!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],s=t[i];if(s){const l=e[i],a=l===void 0||s(l,i,e);if(a!==!0)throw new B("option "+i+" must be "+a,B.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new B("Unknown option "+i,B.ERR_BAD_OPTION)}}const it={assertOptions:br,validators:ht},re=it.validators;let Ue=class{constructor(e){this.defaults=e,this.interceptors={request:new St,response:new St}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ge(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;n!==void 0&&it.assertOptions(n,{silentJSONParsing:re.transitional(re.boolean),forcedJSONParsing:re.transitional(re.boolean),clarifyTimeoutError:re.transitional(re.boolean)},!1),o!=null&&(p.isFunction(o)?t.paramsSerializer={serialize:o}:it.assertOptions(o,{encode:re.function,serialize:re.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i;i=r&&p.merge(r.common,r[t.method]),i&&p.forEach(["delete","get","head","post","put","patch","common"],f=>{delete r[f]}),t.headers=ee.concat(i,r);const s=[];let l=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(l=l&&f.synchronous,s.unshift(f.fulfilled,f.rejected))});const a=[];this.interceptors.response.forEach(function(f){a.push(f.fulfilled,f.rejected)});let c,m=0,g;if(!l){const f=[vt.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,a),g=f.length,c=Promise.resolve(t);m<g;)c=c.then(f[m++],f[m++]);return c}g=s.length;let _=t;for(m=0;m<g;){const f=s[m++],h=s[m++];try{_=f(_)}catch(d){h.call(this,d);break}}try{c=vt.call(this,_)}catch(f){return Promise.reject(f)}for(m=0,g=a.length;m<g;)c=c.then(a[m++],a[m++]);return c}getUri(e){e=ge(this.defaults,e);const t=En(e.baseURL,e.url);return yn(t,e.params,e.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(e){Ue.prototype[e]=function(t,n){return this.request(ge(n||{},{method:e,url:t,data:(n||{}).data}))}});p.forEach(["post","put","patch"],function(e){function t(n){return function(o,r,i){return this.request(ge(i||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}Ue.prototype[e]=t(),Ue.prototype[e+"Form"]=t(!0)});const qe=Ue;let _r=class Tn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(r=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](r);o._listeners=null}),this.promise.then=r=>{let i;const s=new Promise(l=>{o.subscribe(l),i=l}).then(r);return s.cancel=function(){o.unsubscribe(i)},s},t(function(r,i,s){o.reason||(o.reason=new Be(r,i,s),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Tn(function(n){t=n}),cancel:t}}};const gr=_r;function kr(e){return function(t){return e.apply(null,t)}}function yr(e){return p.isObject(e)&&e.isAxiosError===!0}const st={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(st).forEach(([e,t])=>{st[t]=e});const wr=st;function On(e){const t=new qe(e),n=ln(qe.prototype.request,t);return p.extend(n,qe.prototype,t,{allOwnKeys:!0}),p.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return On(ge(e,o))},n}const F=On(dt);F.Axios=qe;F.CanceledError=Be;F.CancelToken=gr;F.isCancel=Nn;F.VERSION=vn;F.toFormData=We;F.AxiosError=B;F.Cancel=F.CanceledError;F.all=function(e){return Promise.all(e)};F.spread=kr;F.isAxiosError=yr;F.mergeConfig=ge;F.AxiosHeaders=ee;F.formToJSON=e=>Sn(p.isHTMLForm(e)?new FormData(e):e);F.HttpStatusCode=wr;F.default=F;const Bn=F,{Axios:ms,AxiosError:bs,CanceledError:_s,isCancel:gs,CancelToken:ks,VERSION:ys,all:ws,Cancel:Ss,isAxiosError:Ns,spread:Es,toFormData:vs,AxiosHeaders:Ts,HttpStatusCode:Sr,formToJSON:Os,mergeConfig:Bs}=Bn,et={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};class Nr extends Error{constructor(t){super(t.statusText),ze(this,"status"),this.response=t,this.status=t.status}}class Er extends Error{constructor(t,n){super(t.msg),ze(this,"code"),this.body=t,this.response=n,this.code=t.code}}var Bt,At;const b=class{constructor(e={}){ze(this,"_axios",Bn.create({baseURL:((Bt=globalThis.document)==null?void 0:Bt.baseURI)??((At=globalThis.location)==null?void 0:At.origin)??et.SIYUAN_DEFAULT_BASE_URL,timeout:et.REQUEST_TIMEOUT,headers:{Authorization:`Token ${et.SIYUAN_DEFAULT_TOKEN}`}})),this.updateOptions(e)}updateOptions(e){for(const[t,n]of Object.entries(e))switch(t){case"token":this._axios.defaults.headers.Authorization=`Token ${e.token}`;break;default:this._axios.defaults[t]=n;break}}async getBookmarkLabels(e){return await this._request(b.api.attr.getBookmarkLabels.pathname,b.api.attr.getBookmarkLabels.method,void 0,e)}async getBlockBreadcrumb(e,t){return await this._request(b.api.block.getBlockBreadcrumb.pathname,b.api.block.getBlockBreadcrumb.method,e,t)}async getDocInfo(e,t){return await this._request(b.api.block.getDocInfo.pathname,b.api.block.getDocInfo.method,e,t)}async listDocsByPath(e,t){return await this._request(b.api.filetree.listDocsByPath.pathname,b.api.filetree.listDocsByPath.method,e,t)}async searchDocs(e,t){return await this._request(b.api.filetree.searchDocs.pathname,b.api.filetree.searchDocs.method,e,t)}async fullTextSearchBlock(e,t){return await this._request(b.api.search.fullTextSearchBlock.pathname,b.api.search.fullTextSearchBlock.method,e,t)}async getRecentDocs(e){return await this._request(b.api.storage.getRecentDocs.pathname,b.api.storage.getRecentDocs.method,void 0,e)}async getConf(e){return await this._request(b.api.system.getConf.pathname,b.api.system.getConf.method,void 0,e)}async upload(e,t){const n=new FormData;return n.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(o=>n.append("file[]",o)),await this._request(b.api.asset.upload.pathname,b.api.asset.upload.method,n,t)}async getBlockAttrs(e,t){return await this._request(b.api.attr.getBlockAttrs.pathname,b.api.attr.getBlockAttrs.method,e,t)}async setBlockAttrs(e,t){return await this._request(b.api.attr.setBlockAttrs.pathname,b.api.attr.setBlockAttrs.method,e,t)}async appendBlock(e,t){return await this._request(b.api.block.appendBlock.pathname,b.api.block.appendBlock.method,e,t)}async deleteBlock(e,t){return await this._request(b.api.block.deleteBlock.pathname,b.api.block.deleteBlock.method,e,t)}async getBlockKramdown(e,t){return await this._request(b.api.block.getBlockKramdown.pathname,b.api.block.getBlockKramdown.method,e,t)}async getChildBlocks(e,t){return await this._request(b.api.block.getChildBlocks.pathname,b.api.block.getChildBlocks.method,e,t)}async insertBlock(e,t){return await this._request(b.api.block.insertBlock.pathname,b.api.block.insertBlock.method,e,t)}async moveBlock(e,t){return await this._request(b.api.block.moveBlock.pathname,b.api.block.moveBlock.method,e,t)}async prependBlock(e,t){return await this._request(b.api.block.prependBlock.pathname,b.api.block.prependBlock.method,e,t)}async transferBlockRef(e,t){return await this._request(b.api.block.transferBlockRef.pathname,b.api.block.transferBlockRef.method,e,t)}async updateBlock(e,t){return await this._request(b.api.block.updateBlock.pathname,b.api.block.updateBlock.method,e,t)}async pandoc(e,t){return await this._request(b.api.convert.pandoc.pathname,b.api.convert.pandoc.method,e,t)}async exportMdContent(e,t){return await this._request(b.api.export.exportMdContent.pathname,b.api.export.exportMdContent.method,e,t)}async getFile(e,t){return await this._request(b.api.file.getFile.pathname,b.api.file.getFile.method,e,t,!1)}async putFile(e,t){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const n=new FormData;for(const[o,r]of Object.entries(e))e.hasOwnProperty(o)&&(r instanceof Blob?n.append(o,r):n.append(o,String(r)));return await this._request(b.api.file.putFile.pathname,b.api.file.putFile.method,n,t)}async readDir(e,t){return await this._request(b.api.file.readDir.pathname,b.api.file.readDir.method,e,t)}async removeFile(e,t){return await this._request(b.api.file.removeFile.pathname,b.api.file.removeFile.method,e,t)}async renameFile(e,t){return await this._request(b.api.file.renameFile.pathname,b.api.file.renameFile.method,e,t)}async createDocWithMd(e,t){return await this._request(b.api.filetree.createDocWithMd.pathname,b.api.filetree.createDocWithMd.method,e,t)}async getHPathByID(e,t){return await this._request(b.api.filetree.getHPathByID.pathname,b.api.filetree.getHPathByID.method,e,t)}async getHPathByPath(e,t){return await this._request(b.api.filetree.getHPathByPath.pathname,b.api.filetree.getHPathByPath.method,e,t)}async moveDocs(e,t){return await this._request(b.api.filetree.moveDocs.pathname,b.api.filetree.moveDocs.method,e,t)}async removeDoc(e,t){return await this._request(b.api.filetree.removeDoc.pathname,b.api.filetree.removeDoc.method,e,t)}async renameDoc(e,t){return await this._request(b.api.filetree.renameDoc.pathname,b.api.filetree.renameDoc.method,e,t)}async closeNotebook(e,t){return await this._request(b.api.notebook.closeNotebook.pathname,b.api.notebook.closeNotebook.method,e,t)}async createNotebook(e,t){return await this._request(b.api.notebook.createNotebook.pathname,b.api.notebook.createNotebook.method,e,t)}async getNotebookConf(e,t){return await this._request(b.api.notebook.getNotebookConf.pathname,b.api.notebook.getNotebookConf.method,e,t)}async lsNotebooks(e){return await this._request(b.api.notebook.lsNotebooks.pathname,b.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,t){return await this._request(b.api.notebook.openNotebook.pathname,b.api.notebook.openNotebook.method,e,t)}async removeNotebook(e,t){return await this._request(b.api.notebook.removeNotebook.pathname,b.api.notebook.removeNotebook.method,e,t)}async renameNotebook(e,t){return await this._request(b.api.notebook.renameNotebook.pathname,b.api.notebook.renameNotebook.method,e,t)}async setNotebookConf(e,t){return await this._request(b.api.notebook.setNotebookConf.pathname,b.api.notebook.setNotebookConf.method,e,t)}async pushErrMsg(e,t){return await this._request(b.api.notification.pushErrMsg.pathname,b.api.notification.pushErrMsg.method,e,t)}async pushMsg(e,t){return await this._request(b.api.notification.pushMsg.pathname,b.api.notification.pushMsg.method,e,t)}async sql(e,t){return await this._request(b.api.query.sql.pathname,b.api.query.sql.method,e,t)}async bootProgress(e){return await this._request(b.api.system.bootProgress.pathname,b.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(b.api.system.currentTime.pathname,b.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(b.api.system.version.pathname,b.api.system.version.method,void 0,e)}async render(e,t){return await this._request(b.api.template.render.pathname,b.api.template.render.method,e,t)}async renderSprig(e,t){return await this._request(b.api.template.renderSprig.pathname,b.api.template.renderSprig.method,e,t)}async _request(e,t,n,o,r=!0){try{const i=await this._axios.request({url:e,method:t,data:n,...o});if(i.status===Sr.Ok)return r&&typeof i.data=="object"?this._parseResponse(i):i.data;throw new Nr(i)}catch(i){throw i}}_parseResponse(e){if(e.data.code===0)return e.data;throw new Er(e.data,e)}};let An=b;ze(An,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});var Cn=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e))(Cn||{}),Dn=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Dn||{}),Pn=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(Pn||{}),Rn=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Rn||{}),Mn=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(Mn||{}),Fn=(e=>(e.u="u",e.o="o",e.t="t",e))(Fn||{}),Ln=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(Ln||{}),qn=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(qn||{}),jn=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(jn||{}),Un=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(Un||{}),In=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(In||{});const y=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Mn,BlockType:Dn,Container:Pn,GroupBy:jn,Leaf:Rn,Method:qn,NodeHeadingSubType:Ln,NodeListSubType:Fn,NodeType:Cn,OrderBy:Un,SortMode:In},Symbol.toStringTag,{value:"Module"}));vr();Or();const Ct=Tr();function vr(){switch(ce.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Tr(){switch(ce.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Or(){switch(ce.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class Br{constructor(t,n=!0){this.label=t,this.collapsed=n}stdout(t,...n){const o=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(o):globalThis.console.group(o),t(...n),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,...t)}table(...t){this.stdout(globalThis.console.table,...t)}debug(...t){this.stdout(globalThis.console.debug,...t)}info(...t){this.stdout(globalThis.console.info,...t)}log(...t){this.stdout(globalThis.console.log,...t)}warn(...t){this.stdout(globalThis.console.warn,...t)}error(...t){this.stdout(globalThis.console.error,...t)}}function Ar(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cr=function(t){return Dr(t)&&!Pr(t)};function Dr(e){return!!e&&typeof e=="object"}function Pr(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Fr(e)}var Rr=typeof Symbol=="function"&&Symbol.for,Mr=Rr?Symbol.for("react.element"):60103;function Fr(e){return e.$$typeof===Mr}function Lr(e){return Array.isArray(e)?[]:{}}function Ee(e,t){return t.clone!==!1&&t.isMergeableObject(e)?ke(Lr(e),e,t):e}function qr(e,t,n){return e.concat(t).map(function(o){return Ee(o,n)})}function jr(e,t){if(!t.customMerge)return ke;var n=t.customMerge(e);return typeof n=="function"?n:ke}function Ur(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Dt(e){return Object.keys(e).concat(Ur(e))}function zn(e,t){try{return t in e}catch{return!1}}function Ir(e,t){return zn(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function zr(e,t,n){var o={};return n.isMergeableObject(e)&&Dt(e).forEach(function(r){o[r]=Ee(e[r],n)}),Dt(t).forEach(function(r){Ir(e,r)||(zn(e,r)&&n.isMergeableObject(t[r])?o[r]=jr(r,n)(e[r],t[r],n):o[r]=Ee(t[r],n))}),o}function ke(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||qr,n.isMergeableObject=n.isMergeableObject||Cr,n.cloneUnlessOtherwiseSpecified=Ee;var o=Array.isArray(t),r=Array.isArray(e),i=o===r;return i?o?n.arrayMerge(e,t,n):zr(e,t,n):Ee(t,n)}ke.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(o,r){return ke(o,r,n)},{})};var Hr=ke,Vr=Hr;const Gr=Ar(Vr);function Pt(...e){return Gr.all(e,{arrayMerge:(t,n,o)=>n})}function Rt(e){const[t,n,o]=e.split(/[+-]/)[0].split(".").map(r=>parseInt(r));return t*1e8+n*1e4+o}function Wr(e,t){const n=Rt(e),o=Rt(t);return n-o}function Kr(e){const{protyle:t,data:n,blockElements:o}=e;if(n){const r={element:t.wysiwyg.element,id:n.id,type:y.NodeType.NodeDocument};return{...r,isDocumentBlock:!0,isMultiBlock:!1,blocks:[r]}}else if(o&&o.length>0){const r=[];return o.forEach(i=>{r.push({element:i,id:i.dataset.nodeId,type:i.dataset.type,subtype:i.dataset.subtype})}),{...r[0],isDocumentBlock:!1,isMultiBlock:r.length>1,blocks:r}}return null}function q(){}function Jr(e,t){for(const n in t)e[n]=t[n];return e}function Hn(e){return e()}function Mt(){return Object.create(null)}function I(e){e.forEach(Hn)}function Vn(e){return typeof e=="function"}function te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Qr(e){return Object.keys(e).length===0}function K(e,t,n,o){if(e){const r=Gn(e,t,n,o);return e[0](r)}}function Gn(e,t,n,o){return e[1]&&o?Jr(n.ctx.slice(),e[1](o(t))):n.ctx}function J(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const i=[],s=Math.max(t.dirty.length,r.length);for(let l=0;l<s;l+=1)i[l]=t.dirty[l]|r[l];return i}return t.dirty|r}return t.dirty}function Q(e,t,n,o,r,i){if(r){const s=Gn(t,n,o,i);e.p(s,r)}}function Y(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function C(e,t){e.appendChild(t)}function v(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function O(e){return document.createElement(e)}function fe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function he(e){return document.createTextNode(e)}function R(){return he(" ")}function de(){return he("")}function M(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function k(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ve(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function at(e){return e===""?null:+e}function Yr(e){return Array.from(e.childNodes)}function Qe(e,t){t=""+t,e.data!==t&&(e.data=t)}function G(e,t){e.value=t??""}function be(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Ft(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Zr(e){const t=e.querySelector(":checked");return t&&t.__value}function E(e,t,n){e.classList[n?"add":"remove"](t)}function Xr(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,o,t),r}class pt{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,o=null){this.e||(this.is_svg?this.e=fe(n.nodeName):this.e=O(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(o)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)v(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}let Te;function Se(e){Te=e}function $r(){if(!Te)throw new Error("Function called outside component initialization");return Te}function mt(){const e=$r();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=Xr(t,n,{cancelable:o});return r.slice().forEach(s=>{s.call(e,i)}),!i.defaultPrevented}return!0}}const me=[],Lt=[];let _e=[];const qt=[],xr=Promise.resolve();let lt=!1;function ei(){lt||(lt=!0,xr.then(Wn))}function Ie(e){_e.push(e)}const tt=new Set;let pe=0;function Wn(){if(pe!==0)return;const e=Te;do{try{for(;pe<me.length;){const t=me[pe];pe++,Se(t),ti(t.$$)}}catch(t){throw me.length=0,pe=0,t}for(Se(null),me.length=0,pe=0;Lt.length;)Lt.pop()();for(let t=0;t<_e.length;t+=1){const n=_e[t];tt.has(n)||(tt.add(n),n())}_e.length=0}while(me.length);for(;qt.length;)qt.pop()();lt=!1,tt.clear(),Se(e)}function ti(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ie)}}function ni(e){const t=[],n=[];_e.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),_e=t}const je=new Set;let ue;function se(){ue={r:0,c:[],p:ue}}function ae(){ue.r||I(ue.c),ue=ue.p}function N(e,t){e&&e.i&&(je.delete(e),e.i(t))}function T(e,t,n,o){if(e&&e.o){if(je.has(e))return;je.add(e),ue.c.push(()=>{je.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function oi(e,t){e.d(1),t.delete(e.key)}function Kn(e,t){T(e,1,1,()=>{t.delete(e.key)})}function bt(e,t,n,o,r,i,s,l,a,c,m,g){let _=e.length,f=i.length,h=_;const d={};for(;h--;)d[e[h].key]=h;const u=[],w=new Map,le=new Map,Ae=[];for(h=f;h--;){const L=g(r,i,h),Z=n(L);let X=s.get(Z);X?o&&Ae.push(()=>X.p(L,t)):(X=c(Z,L),X.c()),w.set(Z,u[h]=X),Z in d&&le.set(Z,Math.abs(h-d[Z]))}const Ce=new Set,De=new Set;function D(L){N(L,1),L.m(l,m),s.set(L.key,L),m=L.first,f--}for(;_&&f;){const L=u[f-1],Z=e[_-1],X=L.key,Pe=Z.key;L===Z?(m=L.first,_--,f--):w.has(Pe)?!s.has(X)||Ce.has(X)?D(L):De.has(Pe)?_--:le.get(X)>le.get(Pe)?(De.add(X),D(L)):(Ce.add(Pe),_--):(a(Z,s),_--)}for(;_--;){const L=e[_];w.has(L.key)||a(L,s)}for(;f;)D(u[f-1]);return I(Ae),u}function z(e){e&&e.c()}function j(e,t,n,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),o||Ie(()=>{const s=e.$$.on_mount.map(Hn).filter(Vn);e.$$.on_destroy?e.$$.on_destroy.push(...s):I(s),e.$$.on_mount=[]}),i.forEach(Ie)}function U(e,t){const n=e.$$;n.fragment!==null&&(ni(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ri(e,t){e.$$.dirty[0]===-1&&(me.push(e),ei(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,r,i,s,l=[-1]){const a=Te;Se(e);const c=e.$$={fragment:null,ctx:[],props:i,update:q,not_equal:r,bound:Mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Mt(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};s&&s(c.root);let m=!1;if(c.ctx=n?n(e,t.props||{},(g,_,...f)=>{const h=f.length?f[0]:_;return c.ctx&&r(c.ctx[g],c.ctx[g]=h)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](h),m&&ri(e,g)),_}):[],c.update(),m=!0,I(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const g=Yr(t.target);c.fragment&&c.fragment.l(g),g.forEach(S)}else c.fragment&&c.fragment.c();t.intro&&N(e.$$.fragment),j(e,t.target,t.anchor,t.customElement),Wn()}Se(a)}class oe{$destroy(){U(this,1),this.$destroy=q}$on(t,n){if(!Vn(n))return q;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Qr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ii(e){let t,n;return{c(){t=fe("svg"),n=fe("use"),ve(n,"xlink:href",e[0]),k(t,"style",e[3]),k(t,"data-id",e[1]),k(t,"class",e[2]),E(t,"popover__block",e[1])},m(o,r){v(o,t,r),C(t,n)},p(o,[r]){r&1&&ve(n,"xlink:href",o[0]),r&8&&k(t,"style",o[3]),r&2&&k(t,"data-id",o[1]),r&4&&k(t,"class",o[2]),r&6&&E(t,"popover__block",o[1])},i:q,o:q,d(o){o&&S(t)}}}function si(e,t,n){let{icon:o}=t,{id:r=""}=t,{className:i=""}=t,{style:s=""}=t;return e.$$set=l=>{"icon"in l&&n(0,o=l.icon),"id"in l&&n(1,r=l.id),"className"in l&&n(2,i=l.className),"style"in l&&n(3,s=l.style)},[o,r,i,s]}class Ye extends oe{constructor(t){super(),ne(this,t,si,ii,te,{icon:0,id:1,className:2,style:3})}}const ai=e=>({focus:e&1}),jt=e=>({focus:e[0]});function Ut(e,t,n){const o=e.slice();return o[13]=t[n],o}function It(e){let t,n,o,r,i,s,l;return n=new Ye({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=O("div"),z(n.$$.fragment),o=R(),r=O("input"),k(r,"placeholder",e[4]),k(r,"class","b3-text-field fn__block b3-form__icon-input"),k(t,"class","b3-form__icon")},m(a,c){v(a,t,c),j(n,t,null),C(t,o),C(t,r),G(r,e[1]),i=!0,s||(l=[M(r,"input",e[9]),M(r,"change",e[5])],s=!0)},p(a,c){(!i||c&16)&&k(r,"placeholder",a[4]),c&2&&r.value!==a[1]&&G(r,a[1])},i(a){i||(N(n.$$.fragment,a),i=!0)},o(a){T(n.$$.fragment,a),i=!1},d(a){a&&S(t),U(n),s=!1,I(l)}}}function zt(e,t){let n,o,r,i,s=t[13].text+"",l,a,c,m,g;o=new Ye({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function _(){return t[10](t[13])}function f(){return t[11](t[13])}return{key:e,first:null,c(){n=O("li"),z(o.$$.fragment),r=R(),i=O("span"),l=R(),k(i,"class","b3-list-item__text svelte-15drd7h"),k(n,"role","button"),k(n,"data-name",a=t[13].name),k(n,"class","b3-list-item"),E(n,"b3-list-item--focus",t[13].key===t[0]),this.first=n},m(h,d){v(h,n,d),j(o,n,null),C(n,r),C(n,i),i.innerHTML=s,C(n,l),c=!0,m||(g=[M(n,"click",_),M(n,"keyup",f)],m=!0)},p(h,d){t=h;const u={};d&4&&(u.icon=t[13].icon),o.$set(u),(!c||d&4)&&s!==(s=t[13].text+"")&&(i.innerHTML=s),(!c||d&4&&a!==(a=t[13].name))&&k(n,"data-name",a),(!c||d&5)&&E(n,"b3-list-item--focus",t[13].key===t[0])},i(h){c||(N(o.$$.fragment,h),c=!0)},o(h){T(o.$$.fragment,h),c=!1},d(h){h&&S(n),U(o),m=!1,I(g)}}}function li(e){let t;return{c(){t=he("Container")},m(n,o){v(n,t,o)},d(n){n&&S(t)}}}function ci(e){let t,n,o,r=[],i=new Map,s,l,a,c=e[3]&&It(e),m=e[2];const g=d=>d[13].key;for(let d=0;d<m.length;d+=1){let u=Ut(e,m,d),w=g(u);i.set(w,r[d]=zt(w,u))}const _=e[8].default,f=K(_,e,e[7],jt),h=f||li();return{c(){t=O("div"),n=O("ul"),c&&c.c(),o=R();for(let d=0;d<r.length;d+=1)r[d].c();s=R(),l=O("div"),h&&h.c(),k(n,"class","b3-tab-bar b3-list b3-list--background"),k(l,"class","config__tab-wrap"),k(t,"class","fn__flex-1 fn__flex config__panel")},m(d,u){v(d,t,u),C(t,n),c&&c.m(n,null),C(n,o);for(let w=0;w<r.length;w+=1)r[w]&&r[w].m(n,null);C(t,s),C(t,l),h&&h.m(l,null),a=!0},p(d,[u]){d[3]?c?(c.p(d,u),u&8&&N(c,1)):(c=It(d),c.c(),N(c,1),c.m(n,o)):c&&(se(),T(c,1,1,()=>{c=null}),ae()),u&69&&(m=d[2],se(),r=bt(r,u,g,1,d,m,i,n,Kn,zt,null,Ut),ae()),f&&f.p&&(!a||u&129)&&Q(f,_,d,d[7],a?J(_,d[7],u,ai):Y(d[7]),jt)},i(d){if(!a){N(c);for(let u=0;u<m.length;u+=1)N(r[u]);N(h,d),a=!0}},o(d){T(c);for(let u=0;u<r.length;u+=1)T(r[u]);T(h,d),a=!1},d(d){d&&S(t),c&&c.d();for(let u=0;u<r.length;u+=1)r[u].d();h&&h.d(d)}}}function ui(e,t,n){let{$$slots:o={},$$scope:r}=t,{panels:i}=t,{focus:s}=t,{searchEnable:l=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:c=""}=t;const m=mt();function g(){m("search-changed",{value:c})}function _(u){m("changed",{key:u}),n(0,s=u)}function f(){c=this.value,n(1,c)}const h=u=>_(u.key),d=u=>_(u.key);return e.$$set=u=>{"panels"in u&&n(2,i=u.panels),"focus"in u&&n(0,s=u.focus),"searchEnable"in u&&n(3,l=u.searchEnable),"searchPlaceholder"in u&&n(4,a=u.searchPlaceholder),"searchValue"in u&&n(1,c=u.searchValue),"$$scope"in u&&n(7,r=u.$$scope)},[s,c,i,l,a,g,_,r,o,f,h,d]}class fi extends oe{constructor(t){super(),ne(this,t,ui,ci,te,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function di(e){let t,n;const o=e[4].default,r=K(o,e,e[3],null);return{c(){t=O("div"),r&&r.c(),k(t,"data-name",e[2]),k(t,"class","config__tab-container"),E(t,"fn__none",!e[0]),E(t,"config__tab-container--top",e[1])},m(i,s){v(i,t,s),r&&r.m(t,null),n=!0},p(i,[s]){r&&r.p&&(!n||s&8)&&Q(r,o,i,i[3],n?J(o,i[3],s,null):Y(i[3]),null),(!n||s&4)&&k(t,"data-name",i[2]),(!n||s&1)&&E(t,"fn__none",!i[0]),(!n||s&2)&&E(t,"config__tab-container--top",i[1])},i(i){n||(N(r,i),n=!0)},o(i){T(r,i),n=!1},d(i){i&&S(t),r&&r.d(i)}}}function hi(e,t,n){let{$$slots:o={},$$scope:r}=t,{display:i=!0}=t,{top:s=!0}=t,{name:l=""}=t;return e.$$set=a=>{"display"in a&&n(0,i=a.display),"top"in a&&n(1,s=a.top),"name"in a&&n(2,l=a.name),"$$scope"in a&&n(3,r=a.$$scope)},[i,s,l,r,o]}class Ht extends oe{constructor(t){super(),ne(this,t,hi,di,te,{display:0,top:1,name:2})}}const pi=e=>({}),Vt=e=>({}),mi=e=>({}),Gt=e=>({}),bi=e=>({}),Wt=e=>({}),_i=e=>({}),Kt=e=>({});function gi(e){let t,n;return{c(){t=new pt(!1),n=de(),t.a=n},m(o,r){t.m(e[0],o,r),v(o,n,r)},p(o,r){r&1&&t.p(o[0])},d(o){o&&S(n),o&&t.d()}}}function ki(e){let t,n;return{c(){t=new pt(!1),n=de(),t.a=n},m(o,r){t.m(e[1],o,r),v(o,n,r)},p(o,r){r&2&&t.p(o[1])},d(o){o&&S(n),o&&t.d()}}}function Jt(e){let t,n,o;const r=e[4].input,i=K(r,e,e[3],Gt);return{c(){t=O("div"),n=R(),i&&i.c(),k(t,"class","fn__hr")},m(s,l){v(s,t,l),v(s,n,l),i&&i.m(s,l),o=!0},p(s,l){i&&i.p&&(!o||l&8)&&Q(i,r,s,s[3],o?J(r,s[3],l,mi):Y(s[3]),Gt)},i(s){o||(N(i,s),o=!0)},o(s){T(i,s),o=!1},d(s){s&&S(t),s&&S(n),i&&i.d(s)}}}function Qt(e){let t,n,o;const r=e[4].input,i=K(r,e,e[3],Vt);return{c(){t=O("span"),n=R(),i&&i.c(),k(t,"class","fn__space")},m(s,l){v(s,t,l),v(s,n,l),i&&i.m(s,l),o=!0},p(s,l){i&&i.p&&(!o||l&8)&&Q(i,r,s,s[3],o?J(r,s[3],l,pi):Y(s[3]),Vt)},i(s){o||(N(i,s),o=!0)},o(s){T(i,s),o=!1},d(s){s&&S(t),s&&S(n),i&&i.d(s)}}}function yi(e){let t,n,o,r,i,s,l;const a=e[4].title,c=K(a,e,e[3],Kt),m=c||gi(e),g=e[4].text,_=K(g,e,e[3],Wt),f=_||ki(e);let h=e[2]&&Jt(e),d=!e[2]&&Qt(e);return{c(){t=O("label"),n=O("div"),m&&m.c(),o=R(),r=O("div"),f&&f.c(),i=R(),h&&h.c(),s=R(),d&&d.c(),k(r,"class","b3-label__text"),k(n,"class","fn__flex-1 svelte-2m76cy"),E(n,"visible",e[2]),k(t,"class","fn__flex b3-label")},m(u,w){v(u,t,w),C(t,n),m&&m.m(n,null),C(n,o),C(n,r),f&&f.m(r,null),C(n,i),h&&h.m(n,null),C(t,s),d&&d.m(t,null),l=!0},p(u,[w]){c?c.p&&(!l||w&8)&&Q(c,a,u,u[3],l?J(a,u[3],w,_i):Y(u[3]),Kt):m&&m.p&&(!l||w&1)&&m.p(u,l?w:-1),_?_.p&&(!l||w&8)&&Q(_,g,u,u[3],l?J(g,u[3],w,bi):Y(u[3]),Wt):f&&f.p&&(!l||w&2)&&f.p(u,l?w:-1),u[2]?h?(h.p(u,w),w&4&&N(h,1)):(h=Jt(u),h.c(),N(h,1),h.m(n,null)):h&&(se(),T(h,1,1,()=>{h=null}),ae()),(!l||w&4)&&E(n,"visible",u[2]),u[2]?d&&(se(),T(d,1,1,()=>{d=null}),ae()):d?(d.p(u,w),w&4&&N(d,1)):(d=Qt(u),d.c(),N(d,1),d.m(t,null))},i(u){l||(N(m,u),N(f,u),N(h),N(d),l=!0)},o(u){T(m,u),T(f,u),T(h),T(d),l=!1},d(u){u&&S(t),m&&m.d(u),f&&f.d(u),h&&h.d(),d&&d.d()}}}function wi(e,t,n){let{$$slots:o={},$$scope:r}=t,{title:i=""}=t,{text:s=""}=t,{block:l=!1}=t;return e.$$set=a=>{"title"in a&&n(0,i=a.title),"text"in a&&n(1,s=a.text),"block"in a&&n(2,l=a.block),"$$scope"in a&&n(3,r=a.$$scope)},[i,s,l,r,o]}let Si=class extends oe{constructor(t){super(),ne(this,t,wi,yi,te,{title:0,text:1,block:2})}};var W=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(W||{});function Yt(e,t,n){const o=e.slice();return o[19]=t[n],o}function Ni(e){let t,n,o;return{c(){t=O("textarea"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4]),be(t,"height",e[8]>0?`${e[8]}px`:void 0)},m(r,i){v(r,t,i),G(t,e[0]),n||(o=[M(t,"input",e[17]),M(t,"change",e[10])],n=!0)},p(r,i){i&4&&(t.disabled=r[2]),i&32&&k(t,"placeholder",r[5]),i&65&&G(t,r[0]),i&8&&E(t,"fn__block",r[3]),i&24&&E(t,"fn__size200",!r[3]&&r[4]),i&256&&be(t,"height",r[8]>0?`${r[8]}px`:void 0)},d(r){r&&S(t),n=!1,I(o)}}}function Ei(e){let t,n=[],o=new Map,r,i,s=e[6];const l=a=>a[19].key;for(let a=0;a<s.length;a+=1){let c=Yt(e,s,a),m=l(c);o.set(m,n[a]=Zt(m,c))}return{c(){t=O("select");for(let a=0;a<n.length;a+=1)n[a].c();t.disabled=e[2],k(t,"class","b3-select"),e[0]===void 0&&Ie(()=>e[16].call(t)),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4]),E(t,"fn__flex-center",!e[3])},m(a,c){v(a,t,c);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(t,null);Ft(t,e[0],!0),r||(i=[M(t,"change",e[16]),M(t,"change",e[10])],r=!0)},p(a,c){c&64&&(s=a[6],n=bt(n,c,l,1,a,s,o,t,oi,Zt,null,Yt)),c&4&&(t.disabled=a[2]),c&65&&Ft(t,a[0]),c&8&&E(t,"fn__block",a[3]),c&24&&E(t,"fn__size200",!a[3]&&a[4]),c&8&&E(t,"fn__flex-center",!a[3])},d(a){a&&S(t);for(let c=0;c<n.length;c+=1)n[c].d();r=!1,I(i)}}}function vi(e){let t,n,o,r;return{c(){t=O("button"),n=he(e[0]),t.disabled=e[2],k(t,"class","b3-button b3-button--outline"),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4]),E(t,"fn__flex-center",!e[3])},m(i,s){v(i,t,s),C(t,n),o||(r=M(t,"click",e[9]),o=!0)},p(i,s){s&1&&Qe(n,i[0]),s&4&&(t.disabled=i[2]),s&8&&E(t,"fn__block",i[3]),s&24&&E(t,"fn__size200",!i[3]&&i[4]),s&8&&E(t,"fn__flex-center",!i[3])},d(i){i&&S(t),o=!1,r()}}}function Ti(e){let t,n,o,r,i,s;return{c(){t=O("input"),t.disabled=e[2],k(t,"class","b3-slider svelte-edt8og"),k(t,"type","range"),k(t,"min",n=e[7].min),k(t,"max",o=e[7].max),k(t,"step",r=e[7].step),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4])},m(l,a){v(l,t,a),G(t,e[0]),i||(s=[M(t,"change",e[15]),M(t,"input",e[15]),M(t,"change",e[10])],i=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&128&&n!==(n=l[7].min)&&k(t,"min",n),a&128&&o!==(o=l[7].max)&&k(t,"max",o),a&128&&r!==(r=l[7].step)&&k(t,"step",r),a&65&&G(t,l[0]),a&8&&E(t,"fn__block",l[3]),a&24&&E(t,"fn__size200",!l[3]&&l[4])},d(l){l&&S(t),i=!1,I(s)}}}function Oi(e){let t,n,o,r,i,s;return{c(){t=O("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"type","number"),k(t,"placeholder",e[5]),k(t,"min",n=e[7].min),k(t,"max",o=e[7].max),k(t,"step",r=e[7].step),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4]),E(t,"fn__flex-center",!e[3])},m(l,a){v(l,t,a),G(t,e[0]),i||(s=[M(t,"input",e[14]),M(t,"change",e[10])],i=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&32&&k(t,"placeholder",l[5]),a&128&&n!==(n=l[7].min)&&k(t,"min",n),a&128&&o!==(o=l[7].max)&&k(t,"max",o),a&128&&r!==(r=l[7].step)&&k(t,"step",r),a&65&&at(t.value)!==l[0]&&G(t,l[0]),a&8&&E(t,"fn__block",l[3]),a&24&&E(t,"fn__size200",!l[3]&&l[4]),a&8&&E(t,"fn__flex-center",!l[3])},d(l){l&&S(t),i=!1,I(s)}}}function Bi(e){let t,n,o;return{c(){t=O("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),E(t,"fn__block",e[3]),E(t,"fn__size200",!e[3]&&e[4]),E(t,"fn__flex-center",!e[3])},m(r,i){v(r,t,i),G(t,e[0]),n||(o=[M(t,"input",e[13]),M(t,"change",e[10])],n=!0)},p(r,i){i&4&&(t.disabled=r[2]),i&32&&k(t,"placeholder",r[5]),i&65&&t.value!==r[0]&&G(t,r[0]),i&8&&E(t,"fn__block",r[3]),i&24&&E(t,"fn__size200",!r[3]&&r[4]),i&8&&E(t,"fn__flex-center",!r[3])},d(r){r&&S(t),n=!1,I(o)}}}function Ai(e){let t,n,o;return{c(){t=O("input"),t.disabled=e[2],k(t,"class","b3-switch svelte-edt8og"),k(t,"type","checkbox"),E(t,"fn__block",e[3]),E(t,"fn__flex-center",!e[3])},m(r,i){v(r,t,i),t.checked=e[0],n||(o=[M(t,"change",e[12]),M(t,"change",e[10])],n=!0)},p(r,i){i&4&&(t.disabled=r[2]),i&65&&(t.checked=r[0]),i&8&&E(t,"fn__block",r[3]),i&8&&E(t,"fn__flex-center",!r[3])},d(r){r&&S(t),n=!1,I(o)}}}function Zt(e,t){let n,o=t[19].text+"",r,i;return{key:e,first:null,c(){n=O("option"),r=he(o),n.__value=i=t[19].key,n.value=n.__value,this.first=n},m(s,l){v(s,n,l),C(n,r)},p(s,l){t=s,l&64&&o!==(o=t[19].text+"")&&Qe(r,o),l&64&&i!==(i=t[19].key)&&(n.__value=i,n.value=n.__value)},d(s){s&&S(n)}}}function Ci(e){let t;function n(i,s){if(i[1]===W.checkbox)return Ai;if(i[1]===W.text)return Bi;if(i[1]===W.number)return Oi;if(i[1]===W.slider)return Ti;if(i[1]===W.button)return vi;if(i[1]===W.select)return Ei;if(i[1]===W.textarea)return Ni}let o=n(e),r=o&&o(e);return{c(){r&&r.c(),t=de()},m(i,s){r&&r.m(i,s),v(i,t,s)},p(i,[s]){o===(o=n(i))&&r?r.p(i,s):(r&&r.d(1),r=o&&o(i),r&&(r.c(),r.m(t.parentNode,t)))},i:q,o:q,d(i){r&&r.d(i),i&&S(t)}}}function Di(e,t,n){let{type:o}=t,{settingKey:r}=t,{settingValue:i}=t,{disabled:s=!1}=t,{block:l=!1}=t,{normal:a=!0}=t,{placeholder:c=""}=t,{options:m=[]}=t,{limits:g={min:0,max:100,step:1}}=t,{height:_=0}=t;const f=mt();function h(D){f("clicked",{event:D})}function d(D){f("changed",{key:r,value:i,event:D})}function u(){i=this.checked,n(0,i),n(6,m)}function w(){i=this.value,n(0,i),n(6,m)}function le(){i=at(this.value),n(0,i),n(6,m)}function Ae(){i=at(this.value),n(0,i),n(6,m)}function Ce(){i=Zr(this),n(0,i),n(6,m)}function De(){i=this.value,n(0,i),n(6,m)}return e.$$set=D=>{"type"in D&&n(1,o=D.type),"settingKey"in D&&n(11,r=D.settingKey),"settingValue"in D&&n(0,i=D.settingValue),"disabled"in D&&n(2,s=D.disabled),"block"in D&&n(3,l=D.block),"normal"in D&&n(4,a=D.normal),"placeholder"in D&&n(5,c=D.placeholder),"options"in D&&n(6,m=D.options),"limits"in D&&n(7,g=D.limits),"height"in D&&n(8,_=D.height)},[i,o,s,l,a,c,m,g,_,h,d,r,u,w,le,Ae,Ce,De]}class _t extends oe{constructor(t){super(),ne(this,t,Di,Ci,te,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function Pi(e){let t,n,o,r,i;const s=e[2].default,l=K(s,e,e[1],null);return{c(){t=O("div"),n=new pt(!1),o=R(),r=O("div"),l&&l.c(),n.a=o,k(r,"class","config-query"),k(t,"class","b3-label")},m(a,c){v(a,t,c),n.m(e[0],t),C(t,o),C(t,r),l&&l.m(r,null),i=!0},p(a,[c]){(!i||c&1)&&n.p(a[0]),l&&l.p&&(!i||c&2)&&Q(l,s,a,a[1],i?J(s,a[1],c,null):Y(a[1]),null)},i(a){i||(N(l,a),i=!0)},o(a){T(l,a),i=!1},d(a){a&&S(t),l&&l.d(a)}}}function Ri(e,t,n){let{$$slots:o={},$$scope:r}=t,{title:i}=t;return e.$$set=s=>{"title"in s&&n(0,i=s.title),"$$scope"in s&&n(1,r=s.$$scope)},[i,r,o]}class Mi extends oe{constructor(t){super(),ne(this,t,Ri,Pi,te,{title:0})}}const Fi=e=>({}),Xt=e=>({}),Li=e=>({}),$t=e=>({}),qi=e=>({}),xt=e=>({});function ji(e){let t,n,o,r,i,s,l,a,c;const m=e[3].icon,g=K(m,e,e[2],xt),_=e[3].title,f=K(_,e,e[2],$t),h=e[3].input,d=K(h,e,e[2],Xt);return{c(){t=O("label"),g&&g.c(),n=R(),o=O("span"),r=R(),i=O("div"),f&&f.c(),s=R(),l=O("span"),a=R(),d&&d.c(),k(o,"class","fn__space"),k(i,"class","fn__flex-1"),k(l,"class","fn__space"),be(t,"min-width",e[0]),be(t,"margin-right",e[1]),k(t,"class","fn__flex svelte-1l7osn9")},m(u,w){v(u,t,w),g&&g.m(t,null),C(t,n),C(t,o),C(t,r),C(t,i),f&&f.m(i,null),C(t,s),C(t,l),C(t,a),d&&d.m(t,null),c=!0},p(u,[w]){g&&g.p&&(!c||w&4)&&Q(g,m,u,u[2],c?J(m,u[2],w,qi):Y(u[2]),xt),f&&f.p&&(!c||w&4)&&Q(f,_,u,u[2],c?J(_,u[2],w,Li):Y(u[2]),$t),d&&d.p&&(!c||w&4)&&Q(d,h,u,u[2],c?J(h,u[2],w,Fi):Y(u[2]),Xt),(!c||w&1)&&be(t,"min-width",u[0]),(!c||w&2)&&be(t,"margin-right",u[1])},i(u){c||(N(g,u),N(f,u),N(d,u),c=!0)},o(u){T(g,u),T(f,u),T(d,u),c=!1},d(u){u&&S(t),g&&g.d(u),f&&f.d(u),d&&d.d(u)}}}function Ui(e,t,n){let{$$slots:o={},$$scope:r}=t,{minWidth:i="24em"}=t,{marginRight:s="2em"}=t;return e.$$set=l=>{"minWidth"in l&&n(0,i=l.minWidth),"marginRight"in l&&n(1,s=l.marginRight),"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class Jn extends oe{constructor(t){super(),ne(this,t,Ui,ji,te,{minWidth:0,marginRight:1})}}var A=(e=>(e[e.input=0]="input",e[e.button=1]="button",e[e.separator=2]="separator",e))(A||{}),P=(e=>(e[e.edit=0]="edit",e[e.update=1]="update",e[e.delete=2]="delete",e[e.switch=3]="switch",e[e.insert=4]="insert",e[e.remove=5]="remove",e[e.toggle=6]="toggle",e[e.replace=7]="replace",e[e.fullscreen=8]="fullscreen",e))(P||{});function en(e,t,n){const o=e.slice();return o[10]=t[n],o[11]=t,o[12]=n,o}function Ii(e){let t,n;return t=new _t({props:{slot:"input",type:W.button,settingKey:"Reset",settingValue:e[1].settings.generalSettings.reset.text}}),t.$on("clicked",e[3]),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p:q,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function zi(e){let t,n;return t=new Si({props:{title:e[1].settings.generalSettings.reset.title,text:e[1].settings.generalSettings.reset.description,$$slots:{input:[Ii]},$$scope:{ctx:e}}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p(o,r){const i={};r&8192&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function tn(e){let t,n;return t=new Mi({props:{title:e[1].menu[e[10].id].label,$$slots:{default:[Qi]},$$scope:{ctx:e}}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p(o,r){const i={};r&1&&(i.title=o[1].menu[o[10].id].label),r&8193&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Hi(e){let t,n;return t=new Ye({props:{slot:"icon",icon:"#iconMenu",className:"svg"}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p:q,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Vi(e){let t;return{c(){t=O("span"),t.textContent=`${e[1].settings.featureSettings.menu.label}`,k(t,"slot","title")},m(n,o){v(n,t,o)},p:q,d(n){n&&S(t)}}}function Gi(e){let t,n;function o(...r){return e[6](e[10],e[11],e[12],...r)}return t=new _t({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:e[10].enable}}),t.$on("changed",o),{c(){z(t.$$.fragment)},m(r,i){j(t,r,i),n=!0},p(r,i){e=r;const s={};i&1&&(s.settingValue=e[10].enable),t.$set(s)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){U(t,r)}}}function nn(e){let t,n;return t=new Jn({props:{minWidth:"12em",$$slots:{input:[Ji],title:[Ki],icon:[Wi]},$$scope:{ctx:e}}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p(o,r){const i={};r&8193&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Wi(e){let t,n;return t=new Ye({props:{slot:"icon",icon:"#iconTheme",className:"svg"}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p:q,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Ki(e){let t;return{c(){t=O("span"),t.textContent=`${e[1].settings.featureSettings.style.label}`,k(t,"slot","title")},m(n,o){v(n,t,o)},p:q,d(n){n&&S(t)}}}function Ji(e){let t,n;function o(...r){return e[7](e[10],e[11],e[12],...r)}return t=new _t({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:e[10].style}}),t.$on("changed",o),{c(){z(t.$$.fragment)},m(r,i){j(t,r,i),n=!0},p(r,i){e=r;const s={};i&1&&(s.settingValue=e[10].style),t.$set(s)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){U(t,r)}}}function Qi(e){let t,n,o,r;t=new Jn({props:{minWidth:"12em",$$slots:{input:[Gi],title:[Vi],icon:[Hi]},$$scope:{ctx:e}}});let i=e[10].style!==void 0&&nn(e);return{c(){z(t.$$.fragment),n=R(),i&&i.c(),o=R()},m(s,l){j(t,s,l),v(s,n,l),i&&i.m(s,l),v(s,o,l),r=!0},p(s,l){const a={};l&8193&&(a.$$scope={dirty:l,ctx:s}),t.$set(a),s[10].style!==void 0?i?(i.p(s,l),l&1&&N(i,1)):(i=nn(s),i.c(),N(i,1),i.m(o.parentNode,o)):i&&(se(),T(i,1,1,()=>{i=null}),ae())},i(s){r||(N(t.$$.fragment,s),N(i),r=!0)},o(s){T(t.$$.fragment,s),T(i),r=!1},d(s){U(t,s),s&&S(n),i&&i.d(s),s&&S(o)}}}function on(e,t){let n,o,r,i=t[10].mode!==A.separator&&tn(t);return{key:e,first:null,c(){n=de(),i&&i.c(),o=de(),this.first=n},m(s,l){v(s,n,l),i&&i.m(s,l),v(s,o,l),r=!0},p(s,l){t=s,t[10].mode!==A.separator?i?(i.p(t,l),l&1&&N(i,1)):(i=tn(t),i.c(),N(i,1),i.m(o.parentNode,o)):i&&(se(),T(i,1,1,()=>{i=null}),ae())},i(s){r||(N(i),r=!0)},o(s){T(i),r=!1},d(s){s&&S(n),i&&i.d(s),s&&S(o)}}}function Yi(e){let t=[],n=new Map,o,r,i=e[0].features;const s=l=>l[12];for(let l=0;l<i.length;l+=1){let a=en(e,i,l),c=s(a);n.set(c,t[l]=on(c,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();o=de()},m(l,a){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(l,a);v(l,o,a),r=!0},p(l,a){a&7&&(i=l[0].features,se(),t=bt(t,a,s,1,l,i,n,o.parentNode,Kn,on,o,en),ae())},i(l){if(!r){for(let a=0;a<i.length;a+=1)N(t[a]);r=!0}},o(l){for(let a=0;a<t.length;a+=1)T(t[a]);r=!1},d(l){for(let a=0;a<t.length;a+=1)t[a].d(l);l&&S(o)}}}function Zi(e){let t,n,o,r;return t=new Ht({props:{display:e[4][0].key===e[9],$$slots:{default:[zi]},$$scope:{ctx:e}}}),o=new Ht({props:{display:e[4][1].key===e[9],$$slots:{default:[Yi]},$$scope:{ctx:e}}}),{c(){z(t.$$.fragment),n=R(),z(o.$$.fragment)},m(i,s){j(t,i,s),v(i,n,s),j(o,i,s),r=!0},p(i,s){const l={};s&512&&(l.display=i[4][0].key===i[9]),s&8192&&(l.$$scope={dirty:s,ctx:i}),t.$set(l);const a={};s&512&&(a.display=i[4][1].key===i[9]),s&8193&&(a.$$scope={dirty:s,ctx:i}),o.$set(a)},i(i){r||(N(t.$$.fragment,i),N(o.$$.fragment,i),r=!0)},o(i){T(t.$$.fragment,i),T(o.$$.fragment,i),r=!1},d(i){U(t,i),i&&S(n),U(o,i)}}}function Xi(e){let t,n;return t=new fi({props:{panels:e[4],focus:$i,$$slots:{default:[Zi,({focus:o})=>({9:o}),({focus:o})=>o?512:0]},$$scope:{ctx:e}}}),{c(){z(t.$$.fragment)},m(o,r){j(t,o,r),n=!0},p(o,[r]){const i={};r&8705&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}let $i=0;function xi(e,t,n){let{config:o}=t,{plugin:r}=t;const i=r.i18n;function s(){r.updateConfig(o)}function l(){r.siyuan.confirm(i.settings.generalSettings.reset.title,i.settings.generalSettings.reset.description,async()=>{await r.resetConfig(),globalThis.location.reload()})}var a=(_=>(_[_.general=0]="general",_[_.feature=1]="feature",_))(a||{});const c=[{key:0,text:i.settings.generalSettings.title,name:i.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:i.settings.featureSettings.title,name:i.settings.featureSettings.title,icon:"#iconMenu"}],m=(_,f,h,d)=>{n(0,f[h].enable=d.detail.value,o),s()},g=(_,f,h,d)=>{n(0,f[h].style=d.detail.value,o),s()};return e.$$set=_=>{"config"in _&&n(0,o=_.config),"plugin"in _&&n(5,r=_.plugin)},[o,i,s,l,c,r,m,g]}class es extends oe{constructor(t){super(),ne(this,t,xi,Xi,te,{config:0,plugin:5})}}const nt={version:"1.0.1",features:[{id:"custom-block-style",enable:!0,mode:A.input,multi:!1,icon:"#iconTheme",type:{default:{enable:!0},[y.NodeType.NodeDocument]:{enable:!1}},tasks:[{type:P.edit,params:{name:"style"}}]},{id:"custom-block-separator-1F23B9BB-BD9C-41A1-830E-F48D23618889",enable:!0,mode:A.separator,multi:!1,type:{default:{enable:!0},[y.NodeType.NodeDocument]:{enable:!1}}},{id:"custom-block-width-full",enable:!0,mode:A.button,multi:!1,icon:"iconHideDock",accelerator:"width: full",style:!0,token:"width-full",type:{default:{enable:!1},[y.NodeType.NodeAudio]:{enable:!0},[y.NodeType.NodeIFrame]:{enable:!0},[y.NodeType.NodeVideo]:{enable:!0},[y.NodeType.NodeWidget]:{enable:!0}},tasks:[{type:P.toggle,params:{name:"custom-block-width",token:"full"}}]},{id:"custom-block-fullscreen",enable:!0,mode:A.button,multi:!1,icon:"iconFullscreen",tasks:[{type:P.fullscreen}]},{id:"custom-block-separator-85642773-CEF8-4D0B-AFDF-BC450D162BEB",enable:!0,mode:A.separator,multi:!1},{id:"custom-block-render-danmaku",enable:!0,mode:A.button,multi:!0,icon:"icon-custom-block-render-danmaku",accelerator:"render: danmaku",style:!0,token:"render-danmaku",tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"danmaku"}}]},{id:"custom-block-render-scroll",enable:!0,mode:A.button,multi:!0,icon:"iconScrollWrapped",accelerator:"render: scroll",style:!0,token:"render-scroll",type:{default:{enable:!0},[y.NodeType.NodeTable]:{enable:!1}},tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"scroll"}}]},{id:"custom-block-separator-71DD3901-AA75-412F-B764-17346468357D",enable:!0,mode:A.separator,multi:!0},{id:"custom-block-render-id",enable:!0,mode:A.button,multi:!0,icon:"iconInfo",accelerator:"render: id",style:!0,token:"render-id",tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"id"}}]},{id:"custom-block-render-index",enable:!0,mode:A.button,multi:!1,icon:"iconOrderedList",accelerator:"render: index",style:!0,token:"render-index",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0}},tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"index"}}]},{id:"custom-block-render-content",enable:!0,mode:A.button,multi:!0,icon:"iconMarkdown",accelerator:"render: content",style:!0,token:"render-content",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeListItem]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0},[y.NodeType.NodeHeading]:{enable:!0},[y.NodeType.NodeParagraph]:{enable:!0},[y.NodeType.NodeMathBlock]:{enable:!0},[y.NodeType.NodeTable]:{enable:!0},[y.NodeType.NodeCodeBlock]:{enable:!0},[y.NodeType.NodeHTMLBlock]:{enable:!0}},tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"content"}}]},{id:"custom-block-render-outline",enable:!0,mode:A.button,multi:!0,icon:"iconMax",accelerator:"render: outline",style:!0,token:"render-outline",tasks:[{type:P.toggle,params:{name:"custom-block-render",token:"outline"}}]},{id:"custom-block-separator-C55B65F3-4470-4C3A-B6D2-81A760634A11",enable:!0,mode:A.separator,multi:!0},{id:"custom-block-writing-mode",enable:!0,mode:A.button,multi:!0,icon:"iconEdit",accelerator:"writing-mode",style:!0,token:"writing-mode",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeListItem]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeHeading]:{enable:!0},[y.NodeType.NodeParagraph]:{enable:!0},[y.NodeType.NodeTable]:{enable:!0}},tasks:[{type:P.switch,params:{name:"custom-block-writing-mode",values:["vertical-rl","vertical-lr",null]}}]},{id:"custom-block-separator-B320E3AA-01A7-45AB-8C64-B58578CDA111",enable:!0,mode:A.separator,multi:!0,type:{default:{enable:!1},[y.NodeType.NodeTable]:{enable:!0}}},{id:"custom-block-table-width-default",enable:!0,mode:A.button,multi:!0,icon:"iconUndo",accelerator:"table-width: null",type:{default:{enable:!1},[y.NodeType.NodeTable]:{enable:!0}},tasks:[{type:P.delete,params:{name:"custom-block-table-width"}}]},{id:"custom-block-table-width-auto",enable:!0,mode:A.button,multi:!0,icon:"icon-custom-block-width-auto",accelerator:"table-width: auto",style:!0,token:"table-width-auto",type:{default:{enable:!1},[y.NodeType.NodeTable]:{enable:!0}},tasks:[{type:P.update,params:{name:"custom-block-table-width",value:"auto"}}]},{id:"custom-block-table-width-equal",enable:!0,mode:A.button,multi:!0,icon:"icon-custom-block-width-equal",accelerator:"table-width: equal",style:!0,token:"table-width-equal",type:{default:{enable:!1},[y.NodeType.NodeTable]:{enable:!0}},tasks:[{type:P.update,params:{name:"custom-block-table-width",value:"equal"}}]},{id:"custom-block-separator-92B49367-D643-4AEC-B90F-7EB86DF4890A",enable:!0,mode:A.separator,multi:!0,type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0}}},{id:"custom-block-list-view-default",enable:!0,mode:A.button,multi:!0,icon:"iconList",accelerator:"list-view: null",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0}},tasks:[{type:P.delete,params:{name:"custom-block-list-view"}}]},{id:"custom-block-list-view-map",enable:!0,mode:A.button,multi:!0,icon:"iconGraph",accelerator:"list-view: map",style:!0,token:"list-view-map",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0}},tasks:[{type:P.update,params:{name:"custom-block-list-view",value:"map"}}]},{id:"custom-block-list-view-table",enable:!0,mode:A.button,multi:!0,icon:"iconTable",accelerator:"list-view: table",style:!0,token:"list-view-table",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0}},tasks:[{type:P.update,params:{name:"custom-block-list-view",value:"table"}}]},{id:"custom-block-list-view-board",enable:!0,mode:A.button,multi:!0,icon:"iconSplitLR",accelerator:"list-view: board",style:!0,token:"list-view-board",type:{default:{enable:!1},[y.NodeType.NodeDocument]:{enable:!0},[y.NodeType.NodeSuperBlock]:{enable:!0},[y.NodeType.NodeList]:{enable:!0},[y.NodeType.NodeBlockquote]:{enable:!0},[y.NodeType.NodeBlockQueryEmbed]:{enable:!0}},tasks:[{type:P.update,params:{name:"custom-block-list-view",value:"board"}}]}]};function ts(e,t){if(e.type){const n=e.type[t.type];if(n){if(!n.enable)return!1}else if(e.type.default&&!e.type.default.enable)return!1}if(e.subtype){const n=e.subtype[t.subtype];if(n){if(!n.enable)return!1}else if(e.subtype.default&&!e.subtype.default.enable)return!1}return!0}function ns(e,t){return!(t.isMultiBlock&&!e.multi||t.blocks.find(n=>!ts(e,n)))}const os=e=>({}),rn=e=>({});function rs(e){let t;const n=e[8].icon,o=K(n,e,e[7],rn),r=o||ss();return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),t=!0},p(i,s){o&&o.p&&(!t||s&128)&&Q(o,n,i,i[7],t?J(n,i[7],s,os):Y(i[7]),rn)},i(i){t||(N(r,i),t=!0)},o(i){T(r,i),t=!1},d(i){r&&r.d(i)}}}function is(e){let t,n;return{c(){t=fe("svg"),n=fe("use"),ve(n,"xlink:href",e[1]),k(t,"class","b3-menu__icon")},m(o,r){v(o,t,r),C(t,n)},p(o,r){r&2&&ve(n,"xlink:href",o[1])},i:q,o:q,d(o){o&&S(t)}}}function ss(e){let t,n;return{c(){t=fe("svg"),n=fe("use"),ve(n,"xlink:href","#"),k(t,"class","b3-menu__icon")},m(o,r){v(o,t,r),C(t,n)},p:q,d(o){o&&S(t)}}}function as(e){let t,n,o,r,i,s,l;return{c(){t=O("div"),n=R(),o=O("input"),r=R(),i=O("div"),k(t,"class","fn__hr--small"),k(o,"placeholder",e[2]),o.disabled=e[4],k(o,"class","b3-text-field fn__size200"),k(i,"class","fn__hr--small")},m(a,c){v(a,t,c),v(a,n,c),v(a,o,c),G(o,e[0]),v(a,r,c),v(a,i,c),s||(l=[M(o,"input",e[9]),M(o,"change",e[6])],s=!0)},p(a,c){c&4&&k(o,"placeholder",a[2]),c&16&&(o.disabled=a[4]),c&1&&o.value!==a[0]&&G(o,a[0])},d(a){a&&S(t),a&&S(n),a&&S(o),a&&S(r),a&&S(i),s=!1,I(l)}}}function ls(e){let t;return{c(){t=he(e[2])},m(n,o){v(n,t,o)},p(n,o){o&4&&Qe(t,n[2])},d(n){n&&S(t)}}}function sn(e){let t,n;return{c(){t=O("span"),n=he(e[5]),k(t,"class","b3-menu__accelerator")},m(o,r){v(o,t,r),C(t,n)},p(o,r){r&32&&Qe(n,o[5])},d(o){o&&S(t)}}}function cs(e){let t,n,o,r,i,s,l;const a=[is,rs],c=[];function m(d,u){return d[1]?0:1}t=m(e),n=c[t]=a[t](e);function g(d,u){return d[3]?as:ls}let _=g(e),f=_(e),h=e[5]&&sn(e);return{c(){n.c(),o=R(),r=O("span"),f.c(),i=R(),h&&h.c(),s=de(),k(r,"class","b3-menu__label")},m(d,u){c[t].m(d,u),v(d,o,u),v(d,r,u),f.m(r,null),v(d,i,u),h&&h.m(d,u),v(d,s,u),l=!0},p(d,[u]){let w=t;t=m(d),t===w?c[t].p(d,u):(se(),T(c[w],1,1,()=>{c[w]=null}),ae(),n=c[t],n?n.p(d,u):(n=c[t]=a[t](d),n.c()),N(n,1),n.m(o.parentNode,o)),_===(_=g(d))&&f?f.p(d,u):(f.d(1),f=_(d),f&&(f.c(),f.m(r,null))),d[5]?h?h.p(d,u):(h=sn(d),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null)},i(d){l||(N(n),l=!0)},o(d){T(n),l=!1},d(d){c[t].d(d),d&&S(o),d&&S(r),f.d(),d&&S(i),h&&h.d(d),d&&S(s)}}}function us(e,t,n){let{$$slots:o={},$$scope:r}=t,{icon:i=""}=t,{label:s=""}=t,{input:l=!1}=t,{disabled:a=!1}=t,{value:c=""}=t,{accelerator:m=""}=t;const g=mt();function _(h){g("changed",{value:c,event:h})}function f(){c=this.value,n(0,c)}return e.$$set=h=>{"icon"in h&&n(1,i=h.icon),"label"in h&&n(2,s=h.label),"input"in h&&n(3,l=h.input),"disabled"in h&&n(4,a=h.disabled),"value"in h&&n(0,c=h.value),"accelerator"in h&&n(5,m=h.accelerator),"$$scope"in h&&n(7,r=h.$$scope)},[c,i,s,l,a,m,_,r,o,f]}class fs extends oe{constructor(t){super(),ne(this,t,us,cs,te,{icon:1,label:2,input:3,disabled:4,value:0,accelerator:5})}}function Re(e){return e.trim().split(/\s+/)}function Qn(e,t){return e.includes(t)?e:[...e,t]}function Yn(e,t){return e.filter(n=>n!==t)}function ds(e,t){return e.includes(t)?Yn(e,t):Qn(e,t)}function hs(e,t,n){return e.map(o=>o===t?n:o)}const an={[P.edit]:async(e,t,n,o)=>{o.element.innerHTML="";const r=new fs({target:o.element,props:{input:!0,disabled:!t.enable,icon:t.icon,label:e.i18n.menu[t.id].label,accelerator:o.name}}),i=await e.client.getBlockAttrs({id:n.id});r.$set({value:i.data[o.name]||""}),r.$on("changed",s=>{e.client.setBlockAttrs({id:n.id,attrs:{[o.name]:s.detail.value}})})},[P.update]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:o.value}})})},[P.delete]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{(await e.client.getBlockAttrs({id:r.id})).data.hasOwnProperty(o.name)&&e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:null}})})},[P.switch]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{const s=(await e.client.getBlockAttrs({id:r.id})).data;let l;if(s.hasOwnProperty(o.name)){const a=o.values.findIndex(c=>c===s[o.name]);l=o.values[(a+1)%o.values.length]}else l=o.values[0];e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:l}})})},[P.insert]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{const s=(await e.client.getBlockAttrs({id:r.id})).data;let l;if(s.hasOwnProperty(o.name)){const a=Re(s[o.name]);l=Qn(a,o.token).join(" ")}else l=o.token;e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:l}})})},[P.remove]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{const s=(await e.client.getBlockAttrs({id:r.id})).data;let l;if(s.hasOwnProperty(o.name)){const a=Re(s[o.name]);l=Yn(a,o.token).join(" "),e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:l}})}})},[P.toggle]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{const s=(await e.client.getBlockAttrs({id:r.id})).data;let l;if(s.hasOwnProperty(o.name)){const a=Re(s[o.name]);l=ds(a,o.token).join(" ")}else l=o.token;e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:l}})})},[P.replace]:async(e,t,n,o)=>{n.blocks.forEach(async r=>{const s=(await e.client.getBlockAttrs({id:r.id})).data;let l;if(s.hasOwnProperty(o.name)){const a=Re(s[o.name]);l=hs(a,o.token,o.newToken).join(" "),e.client.setBlockAttrs({id:r.id,attrs:{[o.name]:l}})}})},[P.fullscreen]:async(e,t,n,o)=>{if(n.isDocumentBlock)n.element.parentElement.parentElement.classList.toggle("fullscreen");else{let r;switch(n.element.dataset.type){case"NodeVideo":r=n.element.querySelector("video");break;case"NodeIFrame":case"NodeWidget":r=n.element.querySelector("iframe");break;case"NodeHTMLBlock":r=n.element.querySelector("protyle-html");break;default:r=n.element;break}r.requestFullscreen()}}},ie=class ie extends ce.Plugin{constructor(n){super(n);H(this,"siyuan",ce);H(this,"logger");H(this,"client");H(this,"STYLE_ELEMENT_ID");H(this,"SETTINGS_DIALOG_ID");H(this,"SYSTEM_FONTS_DIALOG_ID");H(this,"USABLE_FONTS_DIALOG_ID");H(this,"config");H(this,"blockMenuEventListener",n=>{const o=n.detail,r=Kr(o);if(r){const i=[];this.config.features.filter(l=>ns(l,r)).forEach(l=>{switch(l.mode){case A.input:{l.tasks.forEach(a=>{i.push({id:l.id,element:globalThis.document.createElement("div"),disabled:!l.enable,bind:c=>an[a.type](this,l,r,{element:c,...a.params})})});break}case A.button:{i.push({id:l.id,icon:l.icon,label:this.i18n.menu[l.id].label,accelerator:l.accelerator,disabled:!l.enable,click:async()=>{for(const a of l.tasks)await an[a.type](this,l,r,a.params)}});break}case A.separator:{i.push({type:"separator"});break}}}),o.menu.addItem({icon:"icon-custom-block-menu",label:this.i18n.displayName,submenu:i})}});this.logger=new Br(this.name),this.client=new An,this.SETTINGS_DIALOG_ID=`plugin-${this.name}-settings-dialog`}onload(){this.addIcons([$n,xn,eo,to].join("")),this.loadData(ie.GLOBAL_CONFIG_NAME).then(n=>{this.config=Pt(nt,n||{})}).catch(n=>this.logger.error(n)).finally(()=>{this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.updateRootAttr()})}onLayoutReady(){Wr(this.config.version,nt.version)<0&&ce.confirm(`${this.i18n.config.reset.title} <code class="fn__code">${this.displayName} [${this.name}]</code>`,this.i18n.config.reset.description,async()=>{await this.resetConfig(),globalThis.location.reload()})}onunload(){this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.removeRootAttr()}openSetting(){const n=this,o=new ce.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ct?"92vw":"720px",height:Ct?void 0:"640px"});new es({target:o.element.querySelector(`#${n.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(Pt(nt))}async updateConfig(n){return n&&n!==this.config&&(this.config=n),this.updateRootAttr(),this.saveData(ie.GLOBAL_CONFIG_NAME,this.config)}updateRootAttr(){const o=this.config.features.filter(r=>r.enable&&r.style&&r.token).map(r=>r.token);globalThis.document.documentElement.setAttribute(ie.ROOT_ATTRIBUTE_NAME,o.join(" "))}removeRootAttr(){globalThis.document.documentElement.removeAttribute(ie.ROOT_ATTRIBUTE_NAME)}};H(ie,"GLOBAL_CONFIG_NAME","global-config"),H(ie,"ROOT_ATTRIBUTE_NAME","plugin-custom-block");let ct=ie;module.exports=ct;
